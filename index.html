<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RandomDonate</title>
  <meta name="description" content="RandomDonate is a platform where you can donate crypto anonymously to people in need. Youâ€™ll never know who you helped â€” and thatâ€™s the point." />

  <link rel="manifest" href="manifest.json" />
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@200;400;600&display=swap" rel="stylesheet" />
  <!-- Coinbase SDK -->
  <script src="https://commerce.coinbase.com/v1/checkout.js" async></script>

  <style>
    /* GATING */
    #mainContent { display: none; }
    #blockMessage { display: block; text-align: center; padding: 60px 20px; color: #aaa; font-style: italic; }

    /* SPINNER */
    #spinnerOverlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; }
    .spinner { border: 4px solid #333; border-top: 4px solid #0ff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
    @keyframes spin { 100% { transform: rotate(360deg); }}

    /* BASE */
    body { margin:0; padding:0; background:#000; color:#fff; font-family:'Work Sans',sans-serif; }
    header, footer { text-align:center; padding:20px; color:#666; }
    .container { max-width:800px; margin:0 auto; padding:60px 20px; text-align:center; }
    h1 { font-size:2rem; font-weight:200; }
    .intro { font-style:italic; color:#aaa; margin:30px 0; font-size:1.2rem; }

    /* INVITE FORM */
    #inviteForm input { padding:10px; border-radius:4px; border:none; width:200px; }
    #inviteForm button { padding:10px 20px; margin-left:10px; background:#0ff; color:#000; border:none; border-radius:4px; cursor:pointer; }
    #inviteError { display:none; color:#f66; margin-top:10px; font-style:italic; }

    /* DONATE BUTTON & RIPPLE */
    .cta-button { background:#fff; color:#000; padding:14px 28px; font-weight:600; border-radius:4px; cursor:pointer; position:relative; overflow:hidden; margin:30px auto; display:inline-block; }
    .cta-button:hover { background:#ccc; }
    .cta-button::after { content:''; position:absolute; border-radius:50%; width:100px; height:100px; top:50%; left:50%; transform:translate(-50%, -50%) scale(0); background:rgba(0,0,0,0.2); animation:ripple 0.6s linear; pointer-events:none; }
    @keyframes ripple { to { transform:translate(-50%, -50%) scale(4); opacity:0; }}

    /* GLOW EFFECT */
    @keyframes screenGlow { from{background:rgba(255,255,255,0.1);} to{background:transparent;} }
    body.glow-effect::before { content:''; position:fixed; inset:0; background:rgba(255,255,255,0.05); z-index:999; animation:screenGlow 0.4s ease-out; pointer-events:none; }

    /* SECTIONS */
    .section { background:#111; padding:30px; border-radius:8px; margin-top:60px; text-align:left; }
    .section h2 { font-size:1.4rem; font-weight:400; color:#fff; margin-bottom:20px; }
    .section ul { list-style:disc; padding-left:20px; line-height:1.6; color:#ccc; }
    .wallet { background:#222; color:#0f0; padding:15px; border-radius:4px; word-break:break-all; margin:10px auto; width:fit-content; }
    img.qr { display:block; margin:10px auto; max-width:160px; }
    .report h2, .report p, .crypto-box h2, .crypto-box p { text-align:center; }

    /* RIPPLE TEXT */
    #rippleMessage.animate { animation:fadeSlide 0.8s ease-in-out; }
    @keyframes fadeSlide { 0%{opacity:0;transform:translateY(-10px);}50%{opacity:1;transform:translateY(2px);}100%{opacity:1;transform:translateY(0);} }

    /* Responsive */
    @media(max-width:600px){.container{padding:40px 10px;} .cta-button{width:100%;}}
  </style>
</head>
<body>
  <!-- Spinner Overlay -->
  <div id="spinnerOverlay"><div class="spinner"></div></div>

  <!-- BLOCKED VIEW: Invite Form -->
  <div id="blockMessage">
    <form id="inviteForm">
      <input id="inviteCodeInput" type="text" placeholder="Enter invite code" aria-label="Invite Code" />
      <button id="inviteSubmit" type="button">Enter</button>
      <div id="inviteError">Invalid code. Request one here.</div>
    </form>
  </div>

  <!-- GATED CONTENT -->
  <div id="mainContent">
    <header>
      <img src="logo.png" alt="RandomDonate Logo" style="width:180px; margin-bottom:10px;" />
      <h1>Give. Let go. Walk away.</h1>
      <p id="rippleMessage" style="color:#aaa; margin-top:10px;" aria-live="polite">&nbsp;</p>
    </header>

    <audio id="donateSound" src="https://assets.mixkit.co/sfx/preview/mixkit-light-bulb-on-1465.mp3" preload="auto"></audio>

    <div class="container">
      <!-- Intro -->
      <p class="intro">What if you gave... and never knew what it became?<br>What if generosity was not a transaction, but a disappearance?<br>What if helping someone didn't require their face, name, or story?</p>

      <!-- Token Preview -->
      <div class="section token-preview" style="text-align:center;">
        <img src="badge.png" alt="Ripple Badge Preview" style="width:120px;height:120px; margin-bottom:10px;" />
        <p style="color:#aaa; font-size:0.9rem;">Every donor receives this Ripple Badge in their wallet.</p>
      </div>

      <!-- Donate CTA -->
      <p style="color:#bbb; font-size:0.95rem;">Easiest way to donate â€” instant & secure via Coinbase</p>
      <button class="cta-button" id="checkoutButton">Donate Now</button>

      <!-- Recent Ripples -->
      <div class="section ripples">
        <h2>Recent Ripples</h2>
        <ul>
          <li><time>Just now</time>: Someone in Lagos received $5 for food.</li>
          <li><time>2m ago</time>: An artist in Beirut got $12 for rent.</li>
          <li><time>5m ago</time>: A mom in Manila received $8 for diapers.</li>
        </ul>
      </div>

      <!-- How It Works -->
      <div class="section how-it-works">
        <h2>How It Works</h2>
        <ul>
          <li>You donate any amount in crypto â€” $1, $5, or more.</li>
          <li>Someone in need gets that money â€” rent, food, medicine.</li>
          <li>You donâ€™t choose who. And youâ€™ll never know who it went to.</li>
          <li>We log every donation anonymously and share glimpses of the outcomes.</li>
        </ul>
      </div>

      <!-- Transparency & Trust -->
      <div class="section transparency">
        <h2>Transparency & Trust</h2>
        <ul>
          <li>All donations are logged and visible in a public report.</li>
          <li>We share anonymous proof of impact â€” screenshots, messages, outcomes.</li>
          <li>100% of funds go directly to recipients. We take nothing.</li>
        </ul>
      </div>

      <!-- FAQ -->
      <div class="section faq">
        <h2>Frequently Asked Questions</h2>
        <ul>
          <li><strong>How do you choose who gets the money?</strong><br>We review requests and prioritize urgent needs based on honesty & vulnerability.</li>
          <li><strong>Can I request help?</strong><br>Yes. An anonymous request form is coming soon.</li>
          <li><strong>Do you take a cut?</strong><br>No. All funds go directly to those in need.</li>
        </ul>
      </div>

      <!-- Manual Wallet Donation -->
      <div class="section crypto-box">
        <h2>Manual Wallet Donation (Advanced)</h2>
        <p>Copy or scan the QR code below:</p>
        <div class="wallet">0x17D21a83EFa8431FF2468FB1B3db2759163Aad44</div>
        <img class="qr" src="https://api.qrserver.com/v1/create-qr-code/?data=0x17D21a83EFa8431FF2468FB1B3db2759163Aad44&amp;size=160x160" alt="Crypto Wallet QR" />
        <p style="color:#ccc;">Supports: ETH, USDT, USDC (ERC-20)</p>
        <p style="color:#f66; font-size:0.9rem;"><strong>âš  Important:</strong> Only send ERC-20 tokens.</p>
      </div>

      <!-- Live Donation Log -->
      <div class="section report">
        <h2>Live Donation Log</h2>
        <p>All donations are recorded publicly for full transparency.</p>
        <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQdemoEXAMPLEURL/pubhtml?widget=true&amp;headers=false" style="width:100%;height:400px;border:none;border-radius:8px;background:#111;" title="Live Donation Log"></iframe>
      </div>

      <!-- GitHub & About -->
      <footer>
        <p><a href="https://github.com/yourrepo/randomdonate" target="_blank" rel="noopener">View code on GitHub</a> | <button id="aboutLink" style="background:none;border:none;color:#0ff;cursor:pointer;">About Us</button></p>
        <p>Â© 2025 RandomDonate â€” Built with trust. Powered by kindness.</p>
      </footer>
    </div>
  </div>

  <!-- About Modal -->
  <dialog id="aboutModal" style="background:#111;color:#fff;border:none;border-radius:8px;padding:20px;">
    <h2>About RandomDonate</h2>
    <p>RandomDonate is a web3 experiment in anonymous generosity. We prioritize privacy and impactâ€”100% of donations go directly to people in need.</p>
    <button id="aboutClose" style="padding:8px 16px;border:none;border-radius:4px;cursor:pointer;">Close</button>
  </dialog>

  <script>
    // Invite gating
    const validCodes = ['blueflower','wave9','echo123'];
    document.getElementById('inviteSubmit').addEventListener('click', () => {
      const code = document.getElementById('inviteCodeInput').value.trim();
      if (validCodes.includes(code)) {
        document.getElementById('blockMessage').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        document.getElementById('rippleMessage').textContent = 'ðŸ’§ Welcome, giver.';
      } else {
        document.getElementById('inviteError').style.display = 'block';
      }
    });

    // Checkout and feedback
    let rippleCount = 0;
    const checkoutId = '2a1dcfab-b7b8-4568-b4ce-c0d0ff1db2a2';
    const checkoutButton = document.getElementById('checkoutButton');
    checkoutButton.addEventListener('click', () => {
      document.getElementById('spinnerOverlay').style.display = 'flex';
      window.open(`https://commerce.coinbase.com/checkout/${checkoutId}`, '_blank');
      showThankYou();
    });

    function showThankYou() {
      document.getElementById('donateSound').play();
      document.body.classList.add('glow-effect');
      setTimeout(() => document.body.classList.remove('glow-effect'), 400);
      const el = document.getElementById('rippleMessage');
      el.innerHTML = 'ðŸ’™ Thank you for your donation.';
      el.classList.add('animate');
      setTimeout(() => {
        el.textContent = `ðŸ’§ Total donations: ${++rippleCount}`;
        el.classList.remove('animate');
        document.getElementById('spinnerOverlay').style.display = 'none';
      }, 3000);
    }

    // About modal
    const aboutLink = document.getElementById('aboutLink');
    const aboutModal = document.getElementById('aboutModal');
    const aboutClose = document.getElementById('aboutClose');
    aboutLink.addEventListener('click', () => aboutModal.showModal());
    aboutClose.addEventListener('click', () => aboutModal.close());
  </script>
</body>
</html>
